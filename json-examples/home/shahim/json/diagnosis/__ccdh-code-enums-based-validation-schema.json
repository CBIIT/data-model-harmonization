{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "allOf": [
    {
      "$comment": "First we validate the structure schema",
      "$ref": "./__structure-schema.json#/$defs/Diagnosis"
    },
    {
      "if": {
        "properties": {
          "condition": {
            "properties": {
              "coding": {
                "contains": {
                  "properties": {
                    "code": {
                      "enum":{
                        "$ref": "./__code-enums-schema.json#/$defs/vs-ccdh-conditions-stageable/enum"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "then": {},
      "else": false
    }
  ]
}